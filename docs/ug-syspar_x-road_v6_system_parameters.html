<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="github-markdown.css">
    <style>
      .markdown-body {
        box-sizing: border-box;
        min-width: 200px;
        max-width: 980px;
        margin: 0 auto;
        padding: 45px;
      }
    </style>
    <title>X-Road: System Parameters User Guide</title>
  </head>
  <body>
    <article class="markdown-body">
<p><a href="img/eu_regional_development_fund_horizontal_div_15.png" target="_blank"><img src="img/eu_regional_development_fund_horizontal_div_15.png" alt="" title="European Union | European Regional Development Fund | Investing in your future" style="max-width:100%;"></a></p>
<h1>
<a id="x-road-system-parameters-user-guide" class="anchor" href="#x-road-system-parameters-user-guide" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>X-Road: System Parameters User Guide</h1>
<p>Version: 2.14<br>
Doc. ID: UG-SYSPAR</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Version</th>
<th>Description</th>
<th>Author</th>
</tr>
</thead>
<tbody>
<tr>
<td>29.05.2015</td>
<td>1.0</td>
<td>First draft</td>
<td>Siim Annuk</td>
</tr>
<tr>
<td>01.06.2015</td>
<td>1.1</td>
<td>Some corrections done, typos fixed</td>
<td>Siim Annuk</td>
</tr>
<tr>
<td>30.06.2015</td>
<td>1.2</td>
<td>Minor corrections done</td>
<td>Vello Hansen, Imbi Nõgisto</td>
</tr>
<tr>
<td>26.08.2015</td>
<td>1.3</td>
<td>Corrections regarding SQL done</td>
<td>Marju Ignatjeva</td>
</tr>
<tr>
<td>09.09.2015</td>
<td>2.0</td>
<td>Editorial changes made</td>
<td>Imbi Nõgisto</td>
</tr>
<tr>
<td>11.09.2015</td>
<td>2.1</td>
<td>Global configuration generation interval added</td>
<td>Martin Lind</td>
</tr>
<tr>
<td>20.09.2015</td>
<td>2.2</td>
<td>Editorial changes made</td>
<td>Imbi Nõgisto</td>
</tr>
<tr>
<td>23.09.2015</td>
<td>2.3</td>
<td>Warning added about changing system parameters</td>
<td>Siim Annuk</td>
</tr>
<tr>
<td>24.09.2015</td>
<td>2.4</td>
<td>Note added about setting the <em>timeStampingIntervalSeconds</em> system parameter</td>
<td>Siim Annuk</td>
</tr>
<tr>
<td>07.10.2015</td>
<td>2.5</td>
<td>Default value of the parameter <em>acceptable-timestamp-failure-period</em> set to 14400</td>
<td>Kristo Heero</td>
</tr>
<tr>
<td>8.12.2015</td>
<td>2.6</td>
<td>New parameters for configuring signature algorithms and key length, proxy client-side TLS protocols, and software token pin policy</td>
<td>Jarkko Hyöty</td>
</tr>
<tr>
<td>8.12.2015</td>
<td>2.7</td>
<td>Added parameters for toggling SOAP body logging on/off</td>
<td>Janne Mattila</td>
</tr>
<tr>
<td>17.12.2015</td>
<td>2.8</td>
<td>Added monitoring parameters</td>
<td>Ilkka Seppälä</td>
</tr>
<tr>
<td>28.1.2016</td>
<td>2.9</td>
<td>Added configuration client admin port</td>
<td>Ilkka Seppälä</td>
</tr>
<tr>
<td>04.10.2016</td>
<td>2.10</td>
<td>Converted to markdown format</td>
<td>Sami Kallio</td>
</tr>
<tr>
<td>05.10.2016</td>
<td>2.11</td>
<td>Added options for proxy client and server connections. Clarified client-timeout option.</td>
<td>Olli Lindgren</td>
</tr>
<tr>
<td>02.11.2016</td>
<td>2.12</td>
<td>Fix ocspFreshnessSeconds description in system parameters document.</td>
<td>Ilkka Seppälä</td>
</tr>
<tr>
<td>01.12.2017</td>
<td>2.13</td>
<td>Added documentation for minimum global conf version</td>
<td>Sami Kallio</td>
</tr>
<tr>
<td>20.01.2017</td>
<td>2.14</td>
<td>Added license text and version history</td>
<td>Sami Kallio</td>
</tr>
</tbody>
</table>
<h2>
<a id="table-of-contents" class="anchor" href="#table-of-contents" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Table of Contents</h2>

<ul>
<li><a href="#license">License</a></li>
</ul>
<ul>
<li>
<a href="#introduction">Introduction</a>
<ul>
<li><a href="#references">References</a></li>
</ul>
</li>
<li>
<a href="#changing-the-system-parameter-values">Changing the System Parameter Values</a>
<ul>
<li><a href="#changing-the-system-parameter-values-in-configuration-files">Changing the System Parameter Values in Configuration Files</a></li>
<li><a href="#changing-the-system-parameter-values-in-the-central-server-database">Changing the System Parameter Values in the Central Server Database</a></li>
<li><a href="#changing-the-global-configuration-generation-interval-in-the-central-server">Changing the Global Configuration Generation Interval in the Central Server</a></li>
</ul>
</li>
<li><a href="#security-server-system-parameters">Security Server System Parameters</a></li>
<li>
<a href="#central-server-system-parameters">Central Server System Parameters</a>
<ul>
<li><a href="#system-parameters-in-the-configuration-file">System Parameters in the Configuration File</a></li>
<li><a href="#system-parameters-in-the-database">System Parameters in the Database</a></li>
<li><a href="#global-configuration-generation-interval-parameter">Global Configuration Generation Interval Parameter</a></li>
</ul>
</li>
<li><a href="#configuration-proxy-system-parameters">Configuration Proxy System Parameters</a></li>
</ul>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>
<p>This document is licensed under the Creative Commons Attribution-ShareAlike 3.0 Unported License. To view a copy of this license, visit <a href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>.</p>
<h1>
<a id="introduction" class="anchor" href="#introduction" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Introduction</h1>
<p>This document describes the system parameters of the X-Road components – of the security server, the central server and the configuration proxy. Additionally, changing the default values of the system parameters are explained.</p>
<h2>
<a id="references" class="anchor" href="#references" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>References</h2>
<ol>
<li>
<p>[INI] INI file, <a href="http://en.wikipedia.org/wiki/INI_file"><em>http://en.wikipedia.org/wiki/INI_file</em></a></p>
</li>
<li>
<p>[CRON] Quartz Scheduler
CRON expression,
<em><a href="http://www.quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/crontrigger.html">http://www.quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/crontrigger.html</a></em></p>
</li>
</ol>
<h1>
<a id="changing-the-system-parameter-values" class="anchor" href="#changing-the-system-parameter-values" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Changing the System Parameter Values</h1>
<p>The system parameters specify various characteristics of the system, such as port numbers, timeouts and paths to files on disk. The system parameters of the X-Road components are mainly stored in configuration files. Additionally, X-Road central server stores some system parameters in the database.</p>
<p><strong>Changing the values of the system parameters is strongly discouraged, since it may cause unexpected system behaviour.</strong></p>
<h2>
<a id="changing-the-system-parameter-values-in-configuration-files" class="anchor" href="#changing-the-system-parameter-values-in-configuration-files" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Changing the System Parameter Values in Configuration Files</h2>
<p>The configuration files are INI files [INI], where each section contains parameters for a particular server component.</p>
<p>In order to override the default values of system parameters, create or edit the file</p>
<pre><code>/etc/xroad/conf.d/local.ini
</code></pre>
<p>Each system parameter affects a specific server component. To change the value of a system parameter, a section for the affected component must be created in the INI file. The name-value pairs of the system parameters for that component are written under the section, one pair per line.</p>
<p>The following format is used for the sections:</p>
<pre><code>[ServerComponent]
SystemParameterName1=Value1
SystemParameterName2=Value2
</code></pre>
<p>For example, to configure the parameter <em>client-http-port</em> for the <em>proxy</em> component, the following lines must be added to the configuration file:</p>
<pre><code>[proxy]
client-http-port=1234
</code></pre>
<p>Multiple parameters can be configured under the same section:</p>
<pre><code>[proxy]
client-http-port=1234
server-listen-port=20000
</code></pre>
<p><strong>NB! Changing the parameter values in the configuration files requires restarting of the server.</strong></p>
<p><strong>WARNING! The value of the parameter is not validated, thus care must be taken when changing the value. For example, setting the port number to a non-numeric value in the configuration will cause the system to crash.</strong></p>
<h2>
<a id="changing-the-system-parameter-values-in-the-central-server-database" class="anchor" href="#changing-the-system-parameter-values-in-the-central-server-database" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Changing the System Parameter Values in the Central Server Database</h2>
<p>The central server database can be accessed with the psql utility using the following command (password: <em>centerui</em>):</p>
<pre><code>psql -U centerui -h localhost centerui_production
</code></pre>
<p>The default value of a system parameter can be overridden by adding the parameter name and value to the <em>system_parameters</em> table:</p>
<pre><code>INSERT INTO system_parameters (key, value, created_at, updated_at) VALUES ('parameter_name', 'parameter_value', (now() at time zone 'utc'), (now() at time zone 'utc'));
</code></pre>
<p>To edit the value of a system parameter already inserted into the <em>system_parameters</em> table:</p>
<pre><code>UPDATE system_parameters SET value = '*parameter_value*', updated_at = (now() at time zone 'utc') WHERE key = 'parameter_name';
</code></pre>
<p>To restore the default value of a system parameter, delete the parameter from the <em>system_parameters</em> table:</p>
<pre><code>DELETE FROM system_parameters WHERE key = 'parameter_name';
</code></pre>
<p><strong>NB! Modifying or deleting system parameters other than the ones listed in section</strong> <a href="#system-parameters-in-the-database">System Parameters in the Database</a> <strong>will cause the system to crash.</strong></p>
<h2>
<a id="changing-the-global-configuration-generation-interval-in-the-central-server" class="anchor" href="#changing-the-global-configuration-generation-interval-in-the-central-server" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Changing the Global Configuration Generation Interval in the Central Server</h2>
<p>In order to override the default value of the global configuration generation interval, edit the cron expression[1] in the file</p>
<pre><code>/etc/cron.d/xroad-center
</code></pre>
<p>The default contents of the file are the following:</p>
<pre><code>#!/bin/sh
* * * * * xroad curl http://127.0.0.1:8084/managementservice/gen_conf 2&gt;&amp;1 &gt; /dev/null;
</code></pre>
<p><strong>NB!</strong> Global configuration generation interval must be modified with extreme care. Misuse of the global configuration generation interval may hinder the operation of the whole X-Road instance.</p>
<p>The configuration generation interval must be shorter than the value of global configuration expiration interval (<em>confExpireIntervalSeconds</em>, see section 4.2 ), or else the configuration downloaded by the configuration clients (security servers or configuration proxies) will always expire before valid configuration becomes available. It is highly recommended that the global configuration generation interval is multiple times smaller than the global configuration expiration interval.</p>
<h1>
<a id="security-server-system-parameters" class="anchor" href="#security-server-system-parameters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Security Server System Parameters</h1>
<p>This chapter describes the system parameters used by the components of the X-Road security server. For instructions on how to change the parameter values, see section <a href="#changing-the-system-parameter-values-in-configuration-files">Changing the System Parameter Values in Configuration Files</a>.</p>
<table>
<thead>
<tr>
<th><strong>Server component</strong></th>
<th><strong>Parameter</strong></th>
<th><strong>Default value</strong></th>
<th><strong>Explanation</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>common</td>
<td>configuration-path</td>
<td>/etc/xroad/globalconf/</td>
<td>Absolute path to the directory where global configuration is stored.</td>
</tr>
<tr>
<td>common</td>
<td>temp-files-path</td>
<td>/var/tmp/xroad/</td>
<td>Absolute path to the directory where temporary files are stored.</td>
</tr>
<tr>
<td>common</td>
<td>default-signature-algorithm</td>
<td>SHA1withRSA</td>
<td>Global default digital signature algorithm. Possible values: <br>-   SHA1withRSA<br>-   SHA256withRSA <br>-   SHA384withRSA <br>-   SHA512withRSA <br> (since version 6.7)</td>
</tr>
<tr>
<td>proxy</td>
<td>client-http-port</td>
<td>80 <br> 8080 (RHEL)</td>
<td>TCP port on which the service client's security server listens for HTTP requests from client applications.</td>
</tr>
<tr>
<td>proxy</td>
<td>client-https-port</td>
<td>443 <br>       8443 (RHEL)</td>
<td>TCP port on which the service client's security server listens for HTTPS requests from client applications.</td>
</tr>
<tr>
<td>proxy</td>
<td>client-timeout</td>
<td>300000</td>
<td>Defines the time period (in milliseconds), for which the service client's security server tries to connect to the service provider's security server. When the timeout is reached, the service client's security server informs the service client's information system that a service timeout has occurred.<br>Finnish default is 30s (30000) instead of 5 minutes.</td>
</tr>
<tr>
<td>proxy</td>
<td>configuration-anchor-file</td>
<td>/etc/xroad/configuration-anchor.xml</td>
<td>Absolute file name of the configuration anchor that is used to download global configuration.</td>
</tr>
<tr>
<td>proxy</td>
<td>connector-host</td>
<td>0.0.0.0</td>
<td>IP address on which the service client's security server listens for connections from client applications. The value 0.0.0.0 allows listening on all IPv4 interfaces.</td>
</tr>
<tr>
<td>proxy</td>
<td>database-properties</td>
<td>/etc/xroad/db.properties</td>
<td>Absolute file name of the properties file for the configuration of the security server database.</td>
</tr>
<tr>
<td>proxy</td>
<td>enforce-token-pin-policy</td>
<td>false</td>
<td>Controls enforcing the token pin policy. When set to true, software token pin is required to be at least 10 ASCII characters from at least tree character classes (lowercase letters, uppercase letters, digits, special characters).                                                                                                                  (since version 6.7.7)</td>
</tr>
<tr>
<td>proxy</td>
<td>ocsp-cache-path</td>
<td>/var/cache/xroad</td>
<td>Absolute path to the directory where the cached OCSP responses are stored.</td>
</tr>
<tr>
<td>proxy</td>
<td>ocsp-responder-listen-address</td>
<td>0.0.0.0</td>
<td>IP address on which the service provider's security server listens for requests for OCSP responses from the service client's security server. The service client's security server downloads OCSP responses from the service provider's security server while establishing a secure connection between the security servers. The value 0.0.0.0 allows listening on all IPv4 interfaces. Must match the value of proxy.server-listen-address.</td>
</tr>
<tr>
<td>proxy</td>
<td>ocsp-responder-port</td>
<td>5577</td>
<td>TCP port on which the service provider's security server listens for requests for OCSP responses from the service client's security server. The service client's security server downloads OCSP responses from the service provider's security server while establishing a secure connection between the security servers.</td>
</tr>
<tr>
<td>proxy</td>
<td>server-listen-address</td>
<td>0.0.0.0</td>
<td>IP address on which the service provider's security server listens for connections from the service client's security servers. The value 0.0.0.0 allows listening on all IPv4 interfaces.</td>
</tr>
<tr>
<td>proxy</td>
<td>server-listen-port</td>
<td>5500</td>
<td>TCP port on which the service provider's security server listens for connections from the service client's security server.</td>
</tr>
<tr>
<td>proxy</td>
<td>server-port</td>
<td>5500</td>
<td>Destination TCP port for outgoing queries in the service client's security server.</td>
</tr>
<tr>
<td>proxy</td>
<td>jetty-clientproxy-configuration-file</td>
<td>/etc/xroad/jetty/clientproxy.xml</td>
<td>Absolute filename of the Jetty configuration file for the service client's security server. For more information about configuring Jetty server, see <a href="https://wiki.eclipse.org/Jetty/Reference/jetty.xml%5C_usage">https://wiki.eclipse.org/Jetty/Reference/jetty.xml\_usage</a>.</td>
</tr>
<tr>
<td>proxy</td>
<td>jetty-serverproxy-configuration-file</td>
<td>/etc/xroad/jetty/serverproxy.xml</td>
<td>Absolute filename of the Jetty configuration file for the service provider's security server. For more information about configuring Jetty server, see <a href="https://wiki.eclipse.org/Jetty/Reference/jetty.xml%5C_usage">https://wiki.eclipse.org/Jetty/Reference/jetty.xml\_usage</a>.</td>
</tr>
<tr>
<td>proxy</td>
<td>ssl-enabled</td>
<td>true</td>
<td>If true, TLS is used for connections between the service client's and service provider's security servers.</td>
</tr>
<tr>
<td>proxy</td>
<td>client-tls-ciphers</td>
<td>See [2]</td>
<td>TLS ciphers enabled on the client-side interfaces (for both incoming and outgoing requests). (since version 6.7)</td>
</tr>
<tr>
<td>proxy</td>
<td>client-tls-protocols</td>
<td>TLSv1.2,TLSv1.1</td>
<td>TLS protocols enabled on the client-side interfaces (for both incoming and outgoing requests) (since version 6.7)</td>
</tr>
<tr>
<td>proxy</td>
<td>server-connector-max-idle-time</td>
<td>0</td>
<td>The maximum time (in milliseconds) that connections from a service consuming security server to a service providing security server are allowed to be idle before the provider security server starts closing them. Value of 0 means that an infinite idle time is allowed. A non-zero value should allow some time for a pooled connection to be idle, if  pooled connections are to be supported.</td>
</tr>
<tr>
<td>proxy</td>
<td>server-connector-so-linger</td>
<td>0</td>
<td>The SO_LINGER time (in seconds) at the service providing security server end for connections between security servers.<br>A value larger than 0 means that upon closing a connection, the system will allow SO_LINGER seconds for the transmission and acknowledgement of all data written to the peer, at which point the socket is closed gracefully. Upon reaching the linger timeout, the socket is closed forcefully, with a TCP RST. Enabling the option with a timeout of zero does a forceful close immediately.<br>Value of -1 disables the forceful close.</td>
</tr>
<tr>
<td>proxy</td>
<td>client-connector-max-idle-time</td>
<td>0</td>
<td>The maximum time (in milliseconds) that connections from a service consumer to the service consumer's security server are allowed to be idle before the security server starts closing them. Value of 0 means that an infinite idle time is allowed.</td>
</tr>
<tr>
<td>proxy</td>
<td>client-connector-so-linger</td>
<td>0</td>
<td>The SO_LINGER time (in seconds) at the service consuming security server end for connections between a consumer and a security server.<br>A value larger than 0 means that upon closing a connection, the system will allow SO_LINGER seconds for the transmission and acknowledgement of all data written to the peer, at which point the socket is closed gracefully. Upon reaching the linger timeout, the socket is closed forcefully, with a TCP RST. Enabling the option with a timeout of zero does a forceful close immediately.<br>Value of -1 disables the forceful close.</td>
</tr>
<tr>
<td>proxy</td>
<td>client-httpclient-timeout</td>
<td>300000</td>
<td>The maximum time (SO_TIMEOUT, in milliseconds) that connections from a service consuming security server to a service providing security server are allowed to wait for a response before the consumer end httpclient gives up. Value of 0 means that an infinite wait time is allowed. This does not affect idle connections.</td>
</tr>
<tr>
<td>proxy</td>
<td>client-httpclient-so-linger</td>
<td>-1</td>
<td>The SO_LINGER time (in seconds) at the service consuming security server end for connections between security servers.<br>A value larger than 0 means that upon closing a connection, the system will allow SO_LINGER seconds for the transmission and acknowledgement of all data written to the peer, at which point the socket is closed gracefully. Upon reaching the linger timeout, the socket is closed forcefully, with a TCP RST. Enabling the option with a timeout of zero does a forceful close immediately.<br>Value of -1 disables the forceful close.</td>
</tr>
<tr>
<td>proxy</td>
<td>client-use-idle-connection-monitor</td>
<td>false</td>
<td>Should the idle connection monitor be used to clean up idle and expired connections from the connection pool.</td>
</tr>
<tr>
<td>proxy</td>
<td>client-idle-connection-monitor-interval</td>
<td>30000</td>
<td>How often (in milliseconds) should the connection monitor go through the pooled connections to see if it can clean up any idle or expired connections. This option requires the connection monitor to be enabled to have any effect.</td>
</tr>
<tr>
<td>proxy</td>
<td>client-idle-connection-monitor-timeout</td>
<td>60000</td>
<td>The minimum time (in milliseconds) that a pooled connection must be unused (idle) before it can be removed from the pool. Note that removal from the pool also depends on how often the connection monitor runs. This option requires the connection monitor to be enabled to have any effect.</td>
</tr>
<tr>
<td>proxy</td>
<td>pool-total-max-connections</td>
<td>10000</td>
<td>The total maximum number of connections that are allowed in the pool.</td>
</tr>
<tr>
<td>proxy</td>
<td>pool-total-default-max-connections-per-route</td>
<td>2500</td>
<td>The default route specific connection maximum that is set unless a route specific connection limit is set. Due to the current implementation, this is actually the total maximum limit of connections, indepedent of what the above setting is.</td>
</tr>
<tr>
<td>proxy</td>
<td>pool-validate-connections-after-inactivity-of-millis</td>
<td>-1</td>
<td>When reusing a pooled connection to a service providing security server, check that the connection (the socket) is not half-closed if it has been idle for at least this many milliseconds. This method cannot detect half-open connections. Value of -1 disables the check.</td>
</tr>
<tr>
<td>proxy</td>
<td>pool-enable-connection-reuse</td>
<td>false</td>
<td>Allow pooled connections between security servers to be used more than once. This setting needs to be enabled on both ends for connection pooling to work on the service consuming security server.</td>
</tr>
<tr>
<td>proxy</td>
<td>client-use-fastest-connecting-ssl-socket-autoclose</td>
<td>false</td>
<td>On TLS connections between security servers, should the underlying TCP-layer connection (socket) be closed on the service consumer end when the TLS layer connection is terminated.</td>
</tr>
<tr>
<td>proxy</td>
<td>client-fastest-connecting-ssl-use-uri-cache</td>
<td>true</td>
<td>When a service consumer's security server finds the fastest responding service providing security server, should the result be saved in the TLS session cache?</td>
</tr>
<tr>
<td>proxy-ui</td>
<td><em>wsdl-validator-command</em></td>
<td></td>
<td>The command to validate the given X-Road service WSDL. The command script must:<br>a) read the WSDL from the standard input (<em>stdin</em>),<br>b) return exit code 0 on success,<br>c) return exit code 0 and write warnings to the standard error (<em>stderr</em>), if warnings occurs,<br>d) return exit code other then 0 and write error messages to the standard error (<em>stderr</em>), if errors occurs.<br>Defaults to no operation.</td>
</tr>
<tr>
<td>signer</td>
<td>client-timeout</td>
<td>15000</td>
<td>Signing timeout in milliseconds.</td>
</tr>
<tr>
<td>signer</td>
<td>device-configuration-file</td>
<td>/etc/xroad/signer/devices.ini</td>
<td>Absolute filename of the configuration file of the signature creation devices.</td>
</tr>
<tr>
<td>signer</td>
<td>key-configuration-file</td>
<td>/etc/xroad/signer/keyconf.xml</td>
<td>Absolute filename of the configuration file containing signature and authentication keys and certificates.</td>
</tr>
<tr>
<td>signer</td>
<td>port</td>
<td>5556</td>
<td>TCP port on which the signer process listens.</td>
</tr>
<tr>
<td>signer</td>
<td>key-length</td>
<td>2048</td>
<td>Key length for generating authentication and signing keys (since version 6.7)</td>
</tr>
<tr>
<td>signer</td>
<td>csr-signature-algorithm</td>
<td>(see common.default-signature-algorithm)</td>
<td>Certificate Signing Request signature algorithm. If not specified, same as common default. (since version 6.7)</td>
</tr>
<tr>
<td>anti-dos</td>
<td>enabled</td>
<td>true</td>
<td>Flag for enabling or disabling the AntiDOS system.</td>
</tr>
<tr>
<td>anti-dos</td>
<td>max-cpu-load</td>
<td>1.1</td>
<td>Maximum allowed CPU load for accepting new connections. If set to &gt; 1.0, then CPU load is not checked.</td>
</tr>
<tr>
<td>anti-dos</td>
<td>max-heap-usage</td>
<td>1.1</td>
<td>Specifies the maximum allowed Java heap usage when accepting new connections. If set to &gt; 1.0, then heap usage is not checked.</td>
</tr>
<tr>
<td>anti-dos</td>
<td>max-parallel-connections</td>
<td>5000</td>
<td>Maximum number of parallel connections for AntiDOS.</td>
</tr>
<tr>
<td>anti-dos</td>
<td>min-free-file-handles</td>
<td>100</td>
<td>Minimum amount of free file handles in the system for accepting new connections. At least one free file handle must be available to accept a new connection.</td>
</tr>
<tr>
<td>configuration-client</td>
<td>port</td>
<td>5665</td>
<td>TCP port on which the configuration client process listens.</td>
</tr>
<tr>
<td>configuration-client</td>
<td>update-interval</td>
<td>60</td>
<td>Global configuration download interval in seconds.</td>
</tr>
<tr>
<td>configuration-client</td>
<td>admin-port</td>
<td>5675</td>
<td>TCP port on which the configuration client process listens for admin commands.</td>
</tr>
<tr>
<td>message-log</td>
<td>soap-body-logging</td>
<td>true (overridden to false in Finnish installation)</td>
<td>Whether SOAP body of the messages should be logged or not.<br><br>If true, SOAP messages are logged in original form. If false, SOAP body is cleared of its contents and only has an empty child element inside it. As a side effect, details such as formatting and namespace labels of the xml message can be changed and new elements may be introduced for default values in SOAP header.<br><br>Removal of SOAP body is usually done for confidentiality reasons (body contains data that we do not want to have in the logs).<br><br>Note that changing the message this way prevents verifying its signature with the asicverifier tool.</td>
</tr>
<tr>
<td>message-log</td>
<td>enabled-body-logging-local-producer-subsystems</td>
<td></td>
<td>Subsystem-specific overrides for SOAP body logging when soap-body-logging = false.<br><br>This parameter defines logging for <strong>local producer</strong> subsystems, that is, our subsystems that produce some service which external clients use.<br><br>Comma-separated list of client identifiers for which SOAP body logging is enabled. For example FI/ORG/1710128-9/SUBSYSTEM_A1, FI/ORG/1710128-9/SUBSYSTEM_A2 where<br>-   FI = x-road instance<br>-   ORG = member class<br>-   1710128-9 = member code<br>-   SUBSYSTEM_A1 = subsystem code<br><br>This parameter can only be used on subsystem-level, it is not possible to configure SOAP body logging per member.<br><br>If a subsystem has forward slashes “/” in for example subsystem code, those subsystems can’t be configured with this parameter.</td>
</tr>
<tr>
<td>message-log</td>
<td>enabled-body-logging-remote-producer-subsystems</td>
<td></td>
<td>Subsystem-specific overrides for <strong>remote producer</strong> subsystems, that is, remote subsystems that produce services which we use.<br><br>Parameter is used when soap-body-logging = false.</td>
</tr>
<tr>
<td>message-log</td>
<td>disabled-body-logging-local-producer-subsystems</td>
<td></td>
<td>Same as enabled-body-logging-local-producer-subsystems, but this parameter is used when soap-body-logging = true.</td>
</tr>
<tr>
<td>message-log</td>
<td>disabled-body-logging-remote-producer-subsystems</td>
<td></td>
<td>Same as enabled-body-logging-remote-producer-subsystems, but this parameter is used when soap-body-logging = true.</td>
</tr>
<tr>
<td>message-log</td>
<td>acceptable-timestamp-failure-period</td>
<td>14400</td>
<td>Defines the time period (in seconds) for how long is time-stamping allowed to fail (for whatever reasons) before the message log stops accepting any more messages (and consequently the security server stops accepting requests). Set to 0 to disable this check. The value of this parameter should not be lower than the value of the central server system parameter <em>timeStampingIntervalSeconds.</em>     <br><br>Default for Finnish installation is 18 000 seconds</td>
</tr>
<tr>
<td>message-log</td>
<td>archive-interval</td>
<td>0 0 0/6 1/1 * ? *</td>
<td>CRON expression [CRON] defining the interval of archiving the time-stamped messages.</td>
</tr>
<tr>
<td>message-log</td>
<td>archive-max-filesize</td>
<td>33554432</td>
<td>Maximum size for archived files in bytes. Reaching the maximum value triggers file rotation.</td>
</tr>
<tr>
<td>message-log</td>
<td>archive-path</td>
<td>/var/lib/xroad</td>
<td>Absolute path to the directory where time-stamped log records are archived.</td>
</tr>
<tr>
<td>message-log</td>
<td>clean-interval</td>
<td>0 0 0/12 1/1 * ? *</td>
<td>CRON expression [CRON] for deleting any time-stamped and archived records that are older than <em>message-log.keep-records-for</em> from the database.</td>
</tr>
<tr>
<td>message-log</td>
<td>hash-algo-id</td>
<td>SHA-512</td>
<td>The algorithm identifier used for hashing in the message log.<br>Possible values are<br>-   SHA-224,<br>-   SHA-256,<br>-   SHA-384,<br>-   SHA-512.</td>
</tr>
<tr>
<td>message-log</td>
<td>keep-records-for</td>
<td>30</td>
<td>Number of days to keep time-stamped and archived records in the database of the security server. If a time-stamped and archived message record is older than this value, the record is deleted from the database.</td>
</tr>
<tr>
<td>message-log</td>
<td>timestamp-immediately</td>
<td>false</td>
<td>If true, the time-stamp is created synchronously for each request message. This is a security policy requirement to guarantee the time-stamp at the time of logging the message.</td>
</tr>
<tr>
<td>message-log</td>
<td>timestamp-records-limit</td>
<td>10000</td>
<td>Maximum number of message records to time-stamp in one batch.</td>
</tr>
<tr>
<td>monitor</td>
<td>port</td>
<td>2552</td>
<td>TCP port number used in communications with xroad-proxy and xroad-monitor components.</td>
</tr>
</tbody>
</table>
<h1>
<a id="central-server-system-parameters" class="anchor" href="#central-server-system-parameters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Central Server System Parameters</h1>
<p>The system parameters described in this chapter are used by the X-Road central server, except for the parameters <em>ocspFreshnessSeconds</em> and <em>timeStampingIntervalSeconds.</em></p>
<p>The values of <em>ocspFreshnessSeconds</em> and <em>timeStampingIntervalSeconds</em> are distributed to the security servers via the global configuration. These parameters determine the interval of calling OCSP responder services and time-stamping services (respectively) by the security servers.</p>
<h2>
<a id="system-parameters-in-the-configuration-file" class="anchor" href="#system-parameters-in-the-configuration-file" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>System Parameters in the Configuration File</h2>
<p>For instructions on how to change the parameter values, see section <a href="#changing-the-system-parameter-values-in-configuration-files">Changing the System Parameter Values in Configuration Files</a>.</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Server component</strong></td>
<td><strong>Name</strong></td>
<td><strong>Default value</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td>common</td>
<td>temp-files-path</td>
<td>/var/tmp/xroad/</td>
<td>Absolute path to the directory where temporary files are stored.</td>
</tr>
<tr>
<td>center</td>
<td>conf-backup-path</td>
<td>/var/lib/xroad/backup/</td>
<td>Absolute path to the directory where configuration backups are stored.</td>
</tr>
<tr>
<td>center</td>
<td>database-properties</td>
<td>/etc/xroad/db.properties</td>
<td>Absolute path to file where the properties of the database of the central server are stored.</td>
</tr>
<tr>
<td>center</td>
<td>external-directory</td>
<td>externalconf</td>
<td>Name of the signed external configuration directory that is distributed to the configuration clients (security servers and/or configuration proxies) of this and federated X-Road instances.</td>
</tr>
<tr>
<td>center</td>
<td>generated-conf-dir</td>
<td>/var/lib/xroad/public</td>
<td>Absolute path to the directory where both the private and shared parameter files are created for distribution.</td>
</tr>
<tr>
<td>center</td>
<td>internal-directory</td>
<td>internalconf</td>
<td>Name of the signed internal configuration directory that is distributed to the configuration clients (security servers and/or configuration proxies) of this X-Road instance.</td>
</tr>
<tr>
<td>center</td>
<td>trusted-anchors-allowed</td>
<td>false</td>
<td>True if federation is allowed for this X-Road instance.</td>
</tr>
<tr>
<td>center</td>
<td>minimum-global-configuration-version</td>
<td>2</td>
<td>Minimum supported global configuration version on central server. Change this if old global configuration versions need to be supported.</td>
</tr>
</tbody>
</table>
<h2>
<a id="system-parameters-in-the-database" class="anchor" href="#system-parameters-in-the-database" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>System Parameters in the Database</h2>
<p>This section describes the system parameters used by the X-Road central server. For instructions on how to change the parameter values, see section <a href="#changing-the-system-parameter-values-in-the-central-server-database">Changing the System Parameter Values in the Central Server Database</a>.</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Name</strong></td>
<td><strong>Value type</strong></td>
<td><strong>Default value</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td>confExpireIntervalSeconds</td>
<td>integer</td>
<td>600</td>
<td>Time in seconds of the validity of the configuration after creation.</td>
</tr>
<tr>
<td>confHashAlgoUri</td>
<td>string</td>
<td><a href="http://www.w3.org/2001/04/xmlenc#sha512">http://www.w3.org/2001/04/xmlenc#sha512</a></td>
<td>URI of the algorithm used for calculating the hash values of the global configuration files.<br>Possible values are<br><a href="http://www.w3.org/2001/04/xmlenc#sha256">http://www.w3.org/2001/04/xmlenc#sha256</a>,<br><a href="http://www.w3.org/2001/04/xmlenc#sha512">http://www.w3.org/2001/04/xmlenc#sha512</a>.</td>
</tr>
<tr>
<td>confSignAlgoId</td>
<td>string</td>
<td>SHA512withRSA</td>
<td>Identifier of the algorithm used for signing the global configuration.<br>Possible values are<br>-   SHA256withRSA,<br>-   SHA384withRSA,<br>-   SHA512withRSA.</td>
</tr>
<tr>
<td>confSignCertHashAlgoUri</td>
<td>string</td>
<td><a href="http://www.w3.org/2001/04/xmlenc#sha512">http://www.w3.org/2001/04/xmlenc#sha512</a></td>
<td>URI of the algorithm used for calculating the hash value of the certificate used to sign the global configuration.<br>Possible values are<br><a href="http://www.w3.org/2001/04/xmlenc%5C#sha256">http://www.w3.org/2001/04/xmlenc\#sha256</a>,<br><a href="http://www.w3.org/2001/04/xmlenc%5C#sha512">http://www.w3.org/2001/04/xmlenc\#sha512</a>.</td>
</tr>
<tr>
<td>ocspFreshnessSeconds</td>
<td>integer</td>
<td>3600</td>
<td>Defines the validity period (in seconds) for the OCSP responses retrieved from the OCSP responders. OCSP responses older than the validity period are considered expired and cannot be used for certificate verification.</td>
</tr>
<tr>
<td>timeStampingIntervalSeconds</td>
<td>integer</td>
<td>60</td>
<td>Defines the interval of time-stamping service calls. Interval in seconds after which message log records must be timestamped. The interval must be between 60 and 86400 seconds. <strong>Note: this value must be less than <em>ocspFreshnessSeconds.</em></strong>
</td>
</tr>
</tbody>
</table>
<h2>
<a id="global-configuration-generation-interval-parameter" class="anchor" href="#global-configuration-generation-interval-parameter" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Global Configuration Generation Interval Parameter</h2>
<p>The global configuration generation interval parameter regulates the timing for global configuration generation. Global configuration generation is invoked by the Cron daemon[3]. The parameter is located at following file:</p>
<pre><code>/etc/cron.d/xroad-center
</code></pre>
<p>The file is deployed during X-Road installation and by default has following content[4]:</p>
<pre><code>#!/bin/sh
* * * * * xroad curl http://127.0.0.1:8084/managementservice/gen_conf 2&gt;1 &gt;/dev/null;
</code></pre>
<p>The parameter regulating the timing of global configuration generation is the cron expression at the start of the last line (* * * * *), which means that global configuration generation is invoked every minute by default.</p>
<h1>
<a id="configuration-proxy-system-parameters" class="anchor" href="#configuration-proxy-system-parameters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration Proxy System Parameters</h1>
<p>This chapter describes the system parameters used by the X-Road configuration proxy.</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Server component</strong></td>
<td><strong>Name</strong></td>
<td><strong>Default value</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td>configuration-proxy</td>
<td>address</td>
<td>0.0.0.0</td>
<td>The public IP or NAT address which is accessed for downloading the distributed global configuration.</td>
</tr>
<tr>
<td>configuration-proxy</td>
<td>configuration-path</td>
<td>/etc/xroad/configurationproxy/</td>
<td>Absolute path to the directory containing the configuration files of the configuration proxy instance.</td>
</tr>
<tr>
<td>configuration-proxy</td>
<td>generated-conf-path</td>
<td>/var/lib/xroad/public</td>
<td>Absolute path to the public web server directory where the global configuration files that this configuration proxy generates are be placed for distribution.</td>
</tr>
<tr>
<td>configuration-proxy</td>
<td>signature-algorithm-id</td>
<td>SHA512withRSA</td>
<td>ID of the algorithm the configuration proxy uses when computing global configuration signatures.<br><br>The possible values are<br>-   SHA256withRSA,<br>-   SHA384withRSA,<br>-   SHA512withRSA.</td>
</tr>
<tr>
<td>configuration-proxy</td>
<td>hash-algorithm-uri</td>
<td><a href="http://www.w3.org/2001/04/xmlenc#sha512">http://www.w3.org/2001/04/xmlenc#sha512</a></td>
<td>URI that identifies the algorithm the configuration proxy uses when calculating hash values for the global configuration files.<br>The possible values are<br><a href="http://www.w3.org/2001/04/xmlenc#sha256">http://www.w3.org/2001/04/xmlenc#sha256</a>,<br><a href="http://www.w3.org/2001/04/xmlenc#sha512">http://www.w3.org/2001/04/xmlenc#sha512</a>
</td>
</tr>
<tr>
<td>configuration-proxy</td>
<td>download-script</td>
<td>/usr/share/xroad/scripts/download_instance_configuration.sh</td>
<td>Absolute path to the location of the script that initializes the global configuration download procedure.</td>
</tr>
<tr>
<td>configuration-proxy</td>
<td>minimum-global-configuration-version</td>
<td>2</td>
<td>Minimum supported global configuration version on configuration proxy. Change this if old global configuration versions need to be supported.</td>
</tr>
</tbody>
</table>
<p>[1] See also <a href="http://www.quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger"><em>http://www.quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger</em></a>.</p>
<p>[2] Default value for proxy.client-tls-ciphers.</p>
<blockquote>
<p>TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256, TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_RSA_WITH_AES_256_CBC_SHA256, TLS_DHE_RSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_AES_256_CBC_SHA</p>
<p>(see <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider"><em>https://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider</em></a> for possible values)</p>
<p>Note. OpenJDK 8 on RHEL 7 does not support ECDHE key agreement protocol, only DHE cipher suites are supported.</p>
</blockquote>
<p>[3] See also <a href="http://linux.die.net/man/8/cron"><em>http://linux.die.net/man/8/cron</em></a>.</p>
<p>[4] For exact format specification see also <a href="https://help.ubuntu.com/community/CronHowto"><em>https://help.ubuntu.com/community/CronHowto</em></a>.</p>
    </article>
  </body>
</html>
